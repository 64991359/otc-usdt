(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-settingPhone-settingPhone"],{"0485":function(t,n,i){var e=i("5ea3e");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var o=i("4f06").default;o("834fba32",e,!0,{sourceMap:!1,shadowMode:!1})},3858:function(t,n,i){"use strict";var e=i("0485"),o=i.n(e);o.a},"45b4":function(t,n,i){"use strict";i.r(n);var e=i("8370"),o=i("85dd");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(n,t,(function(){return o[t]}))}(s);i("3858");var a=i("f0c5"),c=Object(a["a"])(o["default"],e["b"],e["c"],!1,null,"45dbefc6",null,!1,e["a"],void 0);n["default"]=c.exports},"5ea3e":function(t,n,i){var e=i("24fb");n=e(!1),n.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.bor-b-diy[data-v-45dbefc6]{border-bottom:%?2?% solid rgba(136,134,131,.1)}.item[data-v-45dbefc6]{display:flex;justify-content:center;align-items:center;width:%?50?%;height:%?50?%}',""]),t.exports=n},8370:function(t,n,i){"use strict";i.d(n,"b",(function(){return o})),i.d(n,"c",(function(){return s})),i.d(n,"a",(function(){return e}));var e={navigationBar:i("89a3").default,uSwitch:i("1555").default,uPopup:i("b80f").default},o=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",[i("navigationBar",{attrs:{title:"设置手机"}}),i("v-uni-view",{staticClass:"mlr-32"},[t.isBinding?i("v-uni-view",[i("v-uni-view",{staticClass:"flex flex-y-center mt-30 c_ddba82 bor-b-2 pb-20"},[i("v-uni-view",{staticClass:"flex flex-y-center",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toAreaCode.apply(void 0,arguments)}}},[i("v-uni-view",[t._v(t._s(t.cityCode))]),i("v-uni-view",{staticClass:"ri-arrow-down-s-line"})],1),i("v-uni-view",{staticClass:"mlr-10 c_888683"},[t._v("|")]),i("v-uni-input",{staticClass:"flex-1",attrs:{placeholder:"手机号码",type:"number"},model:{value:t.phone,callback:function(n){t.phone=n},expression:"phone"}})],1),i("v-uni-view",{staticClass:"flex flex-x-center ptb-20 b_ddba82 c_000000 borRadius-12 mt-50",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.nextStep()}}},[t._v("下一步")])],1):t._e(),t.isBinding?t._e():i("v-uni-view",{staticClass:"borRadius-12 b_2d2c2b over-hid c_ddba82"},[i("v-uni-view",{staticClass:"flex mlr-32 ptb-32 flex-y-center bor-b-diy",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.replace()}}},[i("v-uni-view",{staticClass:"flex-1"},[t._v("更换手机")]),i("v-uni-view",{staticClass:"ri-arrow-right-line c_888683"})],1),i("v-uni-view",{staticClass:"flex flex-y-center mlr-32 ptb-32"},[i("v-uni-view",{staticClass:"flex-1"},[t._v("手机验证")]),i("u-switch",{attrs:{asyncChange:!0,activeColor:"#ddba82",size:"18"},on:{change:function(n){arguments[0]=n=t.$handleEvent(n),t.change.apply(void 0,arguments)}},model:{value:t.phoneVerificationOffNo,callback:function(n){t.phoneVerificationOffNo=n},expression:"phoneVerificationOffNo"}})],1)],1)],1),i("u-popup",{attrs:{round:"12",show:t.confirmStatus},on:{close:function(n){arguments[0]=n=t.$handleEvent(n),t.confirmClose.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"b_2d2c2b plr-32",staticStyle:{"border-radius":"12rpx 12rpx 0 0"}},[i("v-uni-view",{staticClass:"c_888683 mt-30 mb-50"},[t._v("提示")]),i("v-uni-view",{staticClass:"c_ddba82 mb-50"},[t._v("安全设置更改后，24小时内无法提币和c2c出售。更换手机后，您下一次登录需要通过新的手机号码登录，是否继续？")]),i("v-uni-view",{staticClass:"flex mb-30"},[i("v-uni-view",{staticClass:"flex-1 flex flex-x-center ptb-20 b_888683 c_000000 borRadius-12",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.confirmClose.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{staticClass:"flex-1 flex flex-x-center ptb-20 ml-32 b_ddba82 c_000000 borRadius-12",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.confirm.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1),i("u-popup",{attrs:{round:"12",show:t.modifyStatus},on:{close:function(n){arguments[0]=n=t.$handleEvent(n),t.modifyClose.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"b_2d2c2b plr-32",staticStyle:{"border-radius":"12rpx 12rpx 0 0"}},[i("v-uni-view",{staticClass:"c_888683 flex mt-20 mb-30"},[i("v-uni-view",{staticClass:"flex-1 flex flex-x-center c_ddba82"},[t._v("更换手机")]),i("v-uni-view",{staticClass:"ri-close-line font-45",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.modifyClose.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"b_ddba82 borRadius-12 p-20 c_000000 mt-20"},[t._v("安全设置更改后，24小时内无法提币和c2c出售")]),i("v-uni-view",{staticClass:"c_888683 mt-20"},[t._v("新手机号码")]),i("v-uni-view",{staticClass:"flex flex-y-center mt-30 c_ddba82 bor-b-2 pb-20"},[i("v-uni-view",{staticClass:"flex flex-y-center",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.toAreaCode.apply(void 0,arguments)}}},[i("v-uni-view",[t._v(t._s(t.cityCode))]),i("v-uni-view",{staticClass:"ri-arrow-down-s-line"})],1),i("v-uni-view",{staticClass:"mlr-10 c_888683"},[t._v("|")]),i("v-uni-input",{staticClass:"flex-1",attrs:{placeholder:"手机号码",type:"number"},model:{value:t.phone,callback:function(n){t.phone=n},expression:"phone"}})],1),i("v-uni-view",{staticClass:"c_888683 mt-20"},[t._v("手机验证码"),i("v-uni-label",{staticClass:"c_ddba82"},[t._v("(验证码将发送到原绑定手机上)")])],1),i("v-uni-view",{staticClass:"flex mt-20 flex-x-between"},[i("v-uni-view",{staticClass:"flex rela"},[i("v-uni-input",{staticClass:"abso wid-100 heig-100 opacity-0",attrs:{maxlength:"6",type:"number"},on:{focus:function(n){arguments[0]=n=t.$handleEvent(n),t.focus("verificationCodeStatus")},blur:function(n){arguments[0]=n=t.$handleEvent(n),t.blur("verificationCodeStatus",t.verificationCode)}},model:{value:t.verificationCode,callback:function(n){t.verificationCode=n},expression:"verificationCode"}}),t._l(6,(function(n,e){return i("v-uni-view",{key:e,staticClass:"item c_ddba82",class:[{"ml-20":0!=e}],style:[{"border-bottom":"2rpx solid "+[t.verificationCodeStatus&&t.Active(e,"verificationCode")?"#ddba82":"#888683"]}]},[t._v(t._s(t.verificationCode[e]))])}))],2),i("v-uni-view",{staticClass:"c_ddba82",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.send()}}},[t._v(t._s(t.text))])],1),i("v-uni-view",{staticClass:"flex flex-x-center ptb-20 b_ddba82 c_000000 borRadius-12 mtb-30",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.submit.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1)},s=[]},"85dd":function(t,n,i){"use strict";i.r(n);var e=i("e787"),o=i.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){i.d(n,t,(function(){return e[t]}))}(s);n["default"]=o.a},e787:function(t,n,i){"use strict";(function(t){i("7a82"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,i("d401"),i("d3b7"),i("25f0"),i("498a"),i("a9e3"),i("ac1f"),i("5319"),i("5b81");var e={data:function(){return{cityCode:"+86",phone:"",confirmStatus:!1,modifyStatus:!1,verificationCode:"",countDown:60,trim:"",text:"发送",verificationCodeStatus:!1}},onBackPress:function(t){return this.confirmStatus?(this.confirmStatus=!1,!0):!!this.modifyStatus&&(this.modifyStatus=!1,!0)},onLoad:function(){var t=this;uni.$on("cityCode",(function(n){t.cityCode=n.code}))},onHide:function(){this.clearInterval()},onUnload:function(){uni.$off("cityCode"),this.clearInterval()},watch:{countDown:function(){0==this.countDown&&this.clearInterval()}},computed:{isBinding:function(){return""==this.userinfo.phone||null==this.userinfo.phone||this.userinfo.phone<1},phoneVerificationOffNo:function(){return null!==this.userinfo.phone_yz&&0!==this.userinfo.phone_yz},Active:function(){var t=this;return function(n,i){return 0==n||void 0!==t[i][n]}}},methods:{makeSign:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n={},i=getApp().globalData.atTime,e=getApp().globalData.appPrivateKey,o=this.token,s=e+o+i+t;return n.time=i,n.sign=this.$md5(s).toString(),n},focus:function(t){this[t]=!0},blur:function(t,n){n.length||(this[t]=!1)},confirmClose:function(){this.confirmStatus=!1},confirm:function(){this.modifyStatus=!0,this.confirmClose()},modifyClose:function(){this.modifyStatus=!1},replace:function(){this.confirmStatus=!0},send:function(){var t=this;60==this.countDown&&(this.getPhoneCode(),this.trim=setInterval((function(){t.countDown--,t.text=t.countDown+"s"}),1e3))},getPhoneCode:function(){var n={phone:this.userinfo.phone,type:"get"};this.$api.getPhoneCode(n).then((function(n){t("log",n," at pages/settingPhone/settingPhone.vue:204"),uni.showToast({title:n.data.message,icon:"none"})})).catch((function(n){t("log",n," at pages/settingPhone/settingPhone.vue:210")}))},clearInterval:function(t){function n(){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}((function(){""!=this.trim&&(clearInterval(this.trim),this.countDown=60,this.text="发送")})),toAreaCode:function(){this.$Router.push({name:"areaCode"})},nextStep:function(){var t={validationList:[!0,!1,!1,!1],type:"phoneAdd",phone:this.phone};this.$Router.push({name:"verification",params:t})},change:function(){var n=this,i=this.makeSign(this.userinfo.phone);if(this.phoneVerificationOffNo){var e={validationList:[!0,!1,!1,!1],type:"phoneValidationOffNo"};e.time=i.time,e.sign=i.sign,this.$Router.push({name:"verification",params:e})}else this.$api.setSwitch({uid:this.uid,status:1,type:"phone",phone:this.userinfo.phone}).then((function(t){uni.showToast({title:t.data.message,icon:"none",success:function(){1==t.data.status&&(n.$set(n.userinfo,"phone_yz",1),n.$store.dispatch("set_userinfo",n.userinfo))}})})).catch((function(n){t("log",n," at pages/settingPhone/settingPhone.vue:272")}))},submit:function(){var n=this;this.$api.changePhone({old_phone:this.userinfo.phone,new_phone:Number(this.phone),code:Number(this.verificationCode),citycode:this.cityCode}).then((function(t){uni.showToast({title:t.data.message,icon:"none",success:function(){1==t.data.status&&(n.$set(n.userinfo,"phone",Number(n.phone)),n.$store.dispatch("set_userinfo",n.userinfo),n.modifyClose(),setTimeout((function(){n.$Router.replaceAll({name:"home"})}),500))}})})).catch((function(n){t("log",n," at pages/settingPhone/settingPhone.vue:301")}))}}};n.default=e}).call(this,i("0de9")["log"])}}]);